(this.webpackJsonpvca=this.webpackJsonpvca||[]).push([[0],{17:function(e,t,n){e.exports=n(35)},22:function(e,t,n){},23:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(14),c=n.n(r),i=(n(22),n(23),n(3)),s=(n(9),n(15),n(1));var u=function(e,t){var n=s.i.shared;n.resources[e]?t(n.resources[e]):n.add(e).load((function(n,a){t(a[e])}))},l=n(8),f=n(7),d=n(11),m=function(e){var t=Object(a.useState)({}),n=Object(i.a)(t,2),o=n[0],r=n[1],c=Object(a.useState)(),s=Object(i.a)(c,2),l=s[0],m=s[1];return Object(a.useEffect)((function(){if(l){var t=Object.keys(o).length,n=l[t];if(n){var a=n.name,c=e(n);u("".concat(c),(function(e){e.error&&console.error(e.error);var t=Object(d.a)(Object(d.a)({},o),{},Object(f.a)({},a,e.textures));r(t)}))}}}),[l,e,o]),{loadComplete:!!l&&l.length===Object.keys(o).length,loadTilesets:function(e){m(e)},tilesetsTextures:o}};var v=function(e){var t=e.jsonPath,n=Object(a.useState)(),r=Object(i.a)(n,2),c=r[0],f=r[1],d=m(h),v=d.loadComplete,b=d.loadTilesets,j=d.tilesetsTextures;Object(a.useEffect)((function(){u("".concat("","/").concat(t),(function(e){f(e.data)}))}),[t]),Object(a.useEffect)((function(){c&&b(c.tilesets)}),[b,c]);var g=function(e){var t=128*(e[0]-e[1])/2+384,n=64*(e[0]+e[1])/2+64;return new s.m(t,n)};if(!v)return o.a.createElement("div",null,"Loading...");var O=j["structure-floor"],w=function(e){return e.map((function(e,t){var n=p(e,c.tilesets);if(!n||!n.tiles)return null;var a=c.width,r=t%a,s=Math.floor(t/a),u=n.tiles.find((function(t){return t.id===e-n.firstgid}));if(!u)return null;var f=u.image.split("/"),d=Object(i.a)(f,3),m=(d[0],d[1]),v=d[2];return j[m]||console.warn("Could not find spritesheet ".concat(m," ").concat(j)),j[m][v]||console.warn("Could not find texture ".concat(m," ").concat(v)),o.a.createElement(l.Sprite,{key:t,name:"".concat(r,",").concat(s),texture:j[m][v],anchor:[0,1],pivot:[64,0],position:g([r,s])})}))};return o.a.createElement(l.Stage,{width:768,height:384,options:{backgroundColor:0},className:"background"},O&&c.layers.map((function(e){return o.a.createElement(l.Container,{key:e.name,name:e.name},w(e.data))})))},h=function(e){return"".concat("","maps/tilesets/").concat(e.name,".json")},p=function(e,t){for(var n,a=t.length-1;a>=0&&!((n=t[a]).firstgid<=e);a--);return n};var b=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(v,{jsonPath:"".concat("","maps/testmap1.json")}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(b,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[17,1,2]]]);
//# sourceMappingURL=main.f1cb4089.chunk.js.map
(this.webpackJsonpvca=this.webpackJsonpvca||[]).push([[0],{39:function(e){e.exports=JSON.parse('{"alpha":{"start":0.25,"end":0},"scale":{"start":0.04,"end":0.29,"minimumScaleMultiplier":1},"color":{"start":"#85888d","end":"#100f0c"},"speed":{"start":100,"end":200,"minimumSpeedMultiplier":1},"acceleration":{"x":10,"y":-30},"maxSpeed":200,"startRotation":{"min":265,"max":270},"noRotation":false,"rotationSpeed":{"min":8,"max":0},"lifetime":{"min":0.5,"max":3.05},"blendMode":"normal","frequency":0.0005,"emitterLifetime":-1,"maxParticles":300,"pos":{"x":0,"y":0},"addAtBack":true,"spawnType":"point"}')},44:function(e,t,n){e.exports=n(72)},49:function(e,t,n){},50:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var a,r,i,o=n(0),c=n.n(o),l=n(36),s=n.n(l),u=(n(49),n(42)),f=n(21),d=n(9),m=(n(50),n(10));!function(e){e.tilelayer="tilelayer",e.objectgroup="objectgroup"}(a||(a={})),function(e){e.orthagonal="orthagonal",e.isometric="isometric",e.staggered="staggered",e.hexagonal="hexagonal"}(r||(r={})),function(e){e.rightUp="right-up",e.rightDown="right-down",e.leftUp="left-up",e.leftDown="left-down"}(i||(i={}));var v=n(5),p=n(38),b=Object(o.forwardRef)((function(e,t){var n=Object(m.useApp)();return window.PIXI=v,c.a.createElement(g,Object.assign({app:n},e,{ref:t}))})),g=Object(m.PixiComponent)("Viewport",{create:function(e){var t=new p.a({screenWidth:e.screenWidth,screenHeight:e.screenHeight,worldWidth:e.worldWidth,worldHeight:e.worldHeight,ticker:e.app.ticker});t.on("clicked",(function(t){e.onClick&&e.onClick(t)}));var n=e.minScale,a=void 0===n?.2:n,r=e.maxScale,i=void 0===r?1:r;return t.drag().pinch().wheel().clamp({direction:"all"}).setZoom(.3).clampZoom({minScale:a,maxScale:i}).decelerate(),t}}),h=b,w=function(e,t,n){var a=E(t,n)+64*e[0]+64*-e[1],r=64*(e[0]+e[1])/2+64+128;return new v.Point(a,r)},E=function(e,t){return 32*(t-e)+128*(t+e)/2/2};window.PIXI=v,n(61);var y=Object(m.PixiComponent)("FloorTileLayer",{create:function(e){return new window.PIXI.tilemap.CompositeRectTileLayer(0,[e.texture])},applyProps:function(e,t,n){var a=n.layer,r=n.tileset,i=n.verticalTiles,o=n.horizontalTiles,c=n.spritesheet;if(a.data)for(var l=function(t){if(a.data[t]>0){var n=[t%o,Math.floor(t/o)],l=w(n,o,i),s=r.tiles.find((function(e){return e.id===a.data[t]-r.firstgid})),u=null===s||void 0===s?void 0:s.image.substr((null===s||void 0===s?void 0:s.image.lastIndexOf("/"))+1);e.addFrame(c.textures[u],l.x-64,l.y-64)}},s=0;s<a.data.length;s++)l(s)}}),O=n(12),j=function(e){var t=Object(o.useRef)(null),n=Object(o.useRef)(),a=Object(o.useState)(e.position||new v.Point),r=Object(d.a)(a,2),i=r[0],l=(r[1],e.bounce?"".concat("/vca","/images/ui/marker.svg"):"".concat("/vca","/images/ui/marker-green.svg"));Object(o.useEffect)((function(){O.a.from(t.current,{duration:1,ease:"elastic.out(2, 0.5)",pixi:{visible:!1,scale:.1}}).delay(e.delay||0)}),[e.delay]),Object(o.useEffect)((function(){var n;return!1!==e.bounce&&(n=O.a.to(t.current,{duration:.5,yoyo:!0,repeat:-1,pixi:{y:"-=40"}}).delay(1+Math.random())),function(){var e;null===(e=n)||void 0===e||e.kill()}}),[e.bounce]);var s=function(e){},u=function(){n.current=void 0},f=function(){};return c.a.createElement(m.Sprite,Object.assign({},e,{anchor:[.5,.5],position:i,ref:t,interactive:!0,image:l,mousedown:s,touchstart:s,mouseup:u,mouseupoutside:u,mousemove:f,touchmove:f}))},x=function(e,t){for(var n,a=t.length-1;a>=0&&!((n=t[a]).firstgid<=e);a--);return n},k=n(39),N=n(30),S=n(40),C=Object(m.PixiComponent)("ParticleEmitter",{create:function(){return new v.ParticleContainer},applyProps:function(e,t,n){var a=n.image,r=n.config,i=Object(N.a)(n,["image","config"]);Object(m.applyDefaultProps)(e,t,i);var o=this._emitter;if(!o){o=new S.a(e,[v.Texture.from(a)],r);var c=performance.now();o.emit=!0,function e(){o.raf=requestAnimationFrame(e);var t=performance.now();o.update(3e-4*(t-c)),c=t}()}this._emitter=o},willUnmount:function(){this._emitter&&(this._emitter.emit=!1,cancelAnimationFrame(this._emitter.raf))}}),T=function(e){var t=e.x,n=void 0===t?0:t,a=e.y,r=void 0===a?0:a;return c.a.createElement(C,{name:"smoke",x:n,y:r,image:"".concat("/vca","/effects/smokeparticle.png"),config:k,pivot:[-64,0]})},R=n(6),P=function(e){var t=e.data,n=e.mapData,a=e.tilesetsTextures,r=e.found,i=e.onClick,l=Object(o.useRef)(null),s=Object(o.useRef)(null);if(Object(o.useEffect)((function(){l.current&&O.a.from(l.current,{duration:1,ease:"elastic.out(2, 0.5)",pixi:{visible:!1,scale:.1}})}),[r]),Object(o.useEffect)((function(){var e,a,r;if(s.current){var i=null===(e=t.properties)||void 0===e?void 0:e.find((function(e){return"animation"===e.name}));if(i)for(var o=JSON.parse(i.value),c=parseFloat((null===(a=t.properties)||void 0===a||null===(r=a.find((function(e){return"delay"===e.name})))||void 0===r?void 0:r.value)||0),l=O.a.timeline({repeat:-1,delay:c}),u=1;u<o.length;u++){var f=o[u-1],d=o[u],m=Math.sqrt(Math.pow(d[0]-f[0],2)+Math.pow(d[1]-f[1],2)),v=w(d,n.width,n.height);l.to(s.current,{duration:.25*m,pixi:{x:v.x,y:v.y},ease:R.b.easeNone})}}}),[n.height,n.width,t.properties]),t.polygon){var u=[t.x/64,t.y/64],f=t.polygon.reduce((function(e,t){return e.push(t.y+t.x),e.push(t.y/2-t.x/2),e}),[]);return c.a.createElement(m.Graphics,{key:"".concat(t.type).concat(t.name),draw:function(e){e.beginFill(12245589),e.drawPolygon(f),e.endFill()},position:w(u,n.width,n.height),pivot:[64,32]})}if(t.gid){var v=t.x,p=t.y,b=t.gid,g=[v/64-1,p/64-1],h=536870911&b,E=x(h,n.tilesets);if(!E||!E.tiles||0===b)return null;var y=0!==(1073741824&b),j=[1,1];0!==(2147483648&b)&&(j[0]*=-1),y&&(j[1]*=-1);var k=E.tiles.find((function(e){return e.id===h-E.firstgid}));if(!k)return null;var N=k.image.split("/"),S=Object(d.a)(N,3),C=(S[0],S[1]),T=S[2];return a[C]||console.warn("Could not find spritesheet ".concat(C," ").concat(a)),a[C].textures[T]||console.warn("Could not find texture ".concat(C," ").concat(T)),c.a.createElement(m.Sprite,{name:"".concat(t.name,": ").concat(v,",").concat(p," (").concat(T,")"),ref:s,scale:j,texture:a[C].textures[T],anchor:[0,1],pivot:[64,0],position:w(g,n.width,n.height),pointerdown:function(){return i(t.name)},interactive:!!t.name},A(t.properties),r&&c.a.createElement(m.Sprite,{ref:l,image:"".concat("/vca","/images/ui/check.svg"),scale:.8,anchor:[-.1,1],pivot:[64,0]}))}return null},A=function(e){if(!e)return null;var t,n,a=e.find((function(e){return"offset"===e.name}));if(a){var r=a.value.split(","),i=Object(d.a)(r,2);t=i[0],n=i[1]}var o=e.find((function(e){return"effect"===e.name}));return"smoke1"===(null===o||void 0===o?void 0:o.value)?c.a.createElement(T,{x:t,y:n}):null};var M=function(e){var t=e.content,n=e.foundSituations,r=e.mapData,i=e.tilesetsTextures,l=e.onSituationClick,s=Object(o.useState)(window.innerWidth),u=Object(d.a)(s,2),f=u[0],p=u[1],b=Object(o.useState)(window.innerHeight),g=Object(d.a)(b,2),E=g[0],O=g[1],k=64*(((null===r||void 0===r?void 0:r.width)||1)+((null===r||void 0===r?void 0:r.height)||1)),N=32*(((null===r||void 0===r?void 0:r.width)||1)+((null===r||void 0===r?void 0:r.height)||1))+128,S=Object(o.useRef)(null);Object(o.useEffect)((function(){S.current&&S.current.moveCenter(k/2,N/2)}),[r,N,k,i]),Object(o.useEffect)((function(){var e=function(){p(window.innerWidth),O(window.innerHeight)};return window.addEventListener("resize",e),window.addEventListener("orientationchange",e),function(){window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e)}}),[]);var C=function(e,t,n){return e.map((function(e,a){var o=536870911&e,l=x(o,r.tilesets);if(!l||!l.tiles||0===e)return null;var s=r.width,u=a%s,f=Math.floor(a/s),v=0!==(1073741824&e),p=[1,1];0!==(2147483648&e)&&(p[0]*=-1),v&&(p[1]*=-1);var b=l.tiles.find((function(e){return e.id===o-l.firstgid}));if(!b)return null;var g=b.image.split("/"),h=Object(d.a)(g,3),E=h[1],y=h[2];return i[E]||console.warn("Could not find spritesheet ".concat(y," ").concat(E," ").concat(i)),i[E].textures[y]||console.warn("Could not find texture ".concat(E," ").concat(y)),c.a.createElement(m.Sprite,{key:a,name:"".concat(t.name,": ").concat(u,",").concat(f," (").concat(y,")"),scale:p,texture:i[E].textures[y],anchor:[0,1],pivot:[64,0],position:w([u,f],r.width,r.height),zIndex:100*a+n})}))},T=function(e){return e.filter((function(e){return e.visible})).map((function(e,t){var a=n.indexOf(e.name)>-1;return c.a.createElement(P,{data:e,key:"".concat(e.type).concat(e.name).concat(t),found:a,tilesetsTextures:i,mapData:r,onClick:l})}))},R=function(t,n,a){var i=.5*a,o=w(n.location,r.width,r.height);return c.a.createElement(j,{position:o,pointertap:function(){return function(t){e.onScenarioClick(t)}(t)},delay:i,bounce:!0,key:t,name:t})},A={sharedLoader:!0,backgroundColor:L(null===r||void 0===r?void 0:r.backgroundcolor)};return c.a.createElement(m.Stage,{width:f,height:E,className:"background",options:A},c.a.createElement(h,{worldWidth:k,worldHeight:N,screenWidth:f,screenHeight:E,ref:S},function(e){if(!e)return console.warn("No layer with name 'floor' found!"),null;var t=I(e).find(Boolean);if(!t)return console.warn("Layer with name 'floor' is empty?"),null;var n=x(536870911&t,r.tilesets);if(!n)return console.warn("No tileset found for floor layer. Huh?"),null;var a=i[n.name];return v.utils.clearTextureCache(),a.spritesheet?c.a.createElement(y,{texture:a.spritesheet._texture,verticalTiles:r.height,horizontalTiles:r.width,layer:e,tileset:n,spritesheet:a.spritesheet}):(console.warn("No texture loaded found for floor layer. Was looking for ".concat(n.name)),null)}(r.layers.find((function(e){return"floor"===e.name}))),c.a.createElement(m.Container,{sortableChildren:!0},r.layers.filter((function(e){return e.visible&&"floor"!==e.name&&e.type===a.tilelayer})).map((function(e,t){var n=I(e);return C(n,e,t)}))),c.a.createElement(m.Container,{sortableChildren:!0},function(e){return e.filter((function(e){return e.visible&&e.type===a.objectgroup})).map((function(e){return T(e.objects)}))}(r.layers)),Object.entries(t.scenarios||[]).map((function(e,t){var n=Object(d.a)(e,2),a=n[0],r=n[1];return R(a,r,t)}))))},L=function(e){if(e)return parseInt(e.substring(1),16)},I=function(e){var t=e.data;return"string"!==typeof t?t:(e.encoding,e.compression,[])};n(62);function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function D(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var H=c.a.createElement("defs",null,c.a.createElement("style",null,".a{fill:#fff;}.a,.b{stroke:#283583;stroke-linecap:round;stroke-linejoin:round;stroke-width:0.75px;}.b{fill:none;}")),G=c.a.createElement("title",null,"Back"),W=c.a.createElement("circle",{className:"a",cx:15.02,cy:15.02,r:14.65}),q=c.a.createElement("path",{className:"b",d:"M11.64,16",transform:"translate(-0.97 -0.93)"}),F=c.a.createElement("path",{className:"b",d:"M11.63,16",transform:"translate(-0.97 -0.93)"}),_=c.a.createElement("path",{className:"b",d:"M20.38,22.88",transform:"translate(-0.97 -0.93)"}),z=c.a.createElement("line",{className:"b",x1:19.39,y1:8.16,x2:10.65,y2:15.02}),J=c.a.createElement("line",{className:"b",x1:19.39,y1:21.98,x2:10.65,y2:15.11}),U=function(e){var t=e.svgRef,n=e.title,a=D(e,["svgRef","title"]);return c.a.createElement("svg",B({width:30.04,height:30.04,viewBox:"0 0 30.04 30.04",ref:t},a),H,void 0===n?G:n?c.a.createElement("title",null,n):null,W,q,F,_,z,J)},X=c.a.forwardRef((function(e,t){return c.a.createElement(U,B({svgRef:t},e))})),Z=(n.p,function(e){var t=e.gameDataReceived,n=e.disableBackButton,a=function(e){if(window.webkit){var t=JSON.stringify(e);webkit.messageHandlers.cordova_iab.postMessage(t)}else window.parent.postMessage(e,"*")};return Object(o.useEffect)((function(){var e;return e=setInterval((function(){window.GAMEDATA&&(clearInterval(e),t(window.GAMEDATA))}),250),window.setGameData=function(e){a({type:"setGameData",data:e})},window.getGameData=function(){return window.GAMEDATA},function(){clearInterval(e)}}),[t]),!0===n?null:c.a.createElement("div",{className:"close"},c.a.createElement(X,{onClick:function(){a({type:"back"})}}))}),V=n(73),Y=(n(63),function(e){var t=e.foundSituations.length<e.content.situations.length;return c.a.createElement("div",{className:"finder-box"},"".concat(e.instruction," (").concat(e.foundSituations.length,"/").concat(e.content.situations.length,")"),c.a.createElement("button",{className:"green button",disabled:t,onClick:e.onOpenGame},e.nextText))}),$=(n(64),function(e){var t=e.onBack,n=e.onSetGameData,a=e.content,r=Object(o.useRef)(null);Object(o.useEffect)((function(){var e;null===r||void 0===r||null===(e=r.current)||void 0===e||e.addEventListener("load",(function(){var e,t;null===r||void 0===r||null===(e=r.current)||void 0===e||null===(t=e.contentWindow)||void 0===t||t.postMessage(a.data,"*")}),!0),window.addEventListener("message",(function(e){switch(e.data.type){case"setGameData":n(e.data.data);break;case"back":t&&t();break;case"exit":i({type:"exit"})}}),!0)}),[a.data,t,n]);var i=function(e){if(window.hasOwnProperty("webkit")&&window.webkit.hasOwnProperty("messageHandlers")){var t=JSON.stringify(e);webkit.messageHandlers.cordova_iab.postMessage(t)}else window.top.postMessage(e,"*")};return c.a.createElement("iframe",{src:a.url,ref:r,title:a.url,className:"iframe-content"})});n(65);function K(){return(K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Q(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var ee=c.a.createElement("style",{type:"text/css"},"\n\t.st0{fill:none;stroke:#3FA548;stroke-width:32;}\n"),te=c.a.createElement("defs",null),ne=c.a.createElement("g",{id:"Page-1"},c.a.createElement("polyline",{id:"checkmark",className:"st0",points:"11.33,88.97 88.95,166.87 244.67,11.32  "})),ae=function(e){var t=e.svgRef,n=e.title,a=Q(e,["svgRef","title"]);return c.a.createElement("svg",K({id:"m-check-mark",x:"0px",y:"0px",width:"255.97px",height:"189.51px",viewBox:"0 0 255.97 189.51",style:{enableBackground:"new 0 0 255.97 189.51"},xmlSpace:"preserve",ref:t},a),n?c.a.createElement("title",null,n):null,ee,te,ne)},re=c.a.forwardRef((function(e,t){return c.a.createElement(ae,K({svgRef:t},e))})),ie=(n.p,function(e){var t=e.scenarios,n=Object.keys(t);return c.a.createElement("div",{className:"scenarios-box"},c.a.createElement("ul",null,n.map((function(n,a){return function(n,a){var r=t[n];return void 0===e.solvedScenarios[a]?c.a.createElement("li",{className:"",onClick:function(){},key:n},r.title):c.a.createElement("li",{className:"completed",key:n},c.a.createElement(re,{className:"check"}),r.title)}(n,a)}))))}),oe=n(74),ce=n(26);var le,se,ue=function(e){var t=e.sceneConfig,n=e.imageBaseUrl,a=Object(N.a)(e,["sceneConfig","imageBaseUrl"]),r=Object(o.useState)(1),i=Object(d.a)(r,2),l=i[0],s=i[1];return Object(o.useEffect)((function(){var e=function(){window.innerWidth<1280||window.innerHeight<720?1280-window.innerWidth>720-window.innerHeight?s(window.innerWidth/1280):s(window.innerHeight/720):s(1)};return window.addEventListener("resize",e),e(),function(){window.removeEventListener("resize",e)}}),[]),c.a.createElement(m.Stage,{width:1280*l,height:720*l,className:"scene",options:{backgroundColor:16777215}},c.a.createElement(m.Container,Object.assign({},a,{scale:l}),t.map((function(e){return function(e){var t=[e.scale||1,e.scale||1];return e.flipped&&(t[0]=-t[0]),c.a.createElement(m.Sprite,{image:"".concat(n).concat(e.image),key:e.image,position:e.position||[0,0]})}(e)}))))};n(66);!function(e){e.scenario="scenario",e.finder="finder"}(le||(le={})),function(e){e.caption="caption",e.speech="speech",e.image="image"}(se||(se={})),O.a.registerPlugin(oe.a);var fe=function(e){var t=e.content,n=e.selectedAnswer,a=void 0===n?null:n,r=t.imageBaseUrl,i=Object(o.useState)(a),l=Object(d.a)(i,2),s=l[0],u=l[1],f=Object(o.useMemo)((function(){return null===s?null:e.content.reactions[s]}),[e.content.reactions,s]),m=Object(o.useState)(null!=a),v=Object(d.a)(m,2),p=v[0],b=v[1],g=Object(o.useState)((null===f||void 0===f?void 0:f.scene)||e.content.scene),h=Object(d.a)(g,2),w=h[0],E=h[1],y=Object(o.useRef)(null),j=Object(o.useRef)(null),x=Object(o.useRef)(null),k=Object(o.useRef)(null),N=Object(o.useRef)(null),S=Object(o.useRef)(null);Object(o.useEffect)((function(){ce.a.add("correct","".concat("/vca","/sound/correct.mp3")),ce.a.add("wrong","".concat("/vca","/sound/wrong.mp3"))}),[]);var C=Object(o.useRef)(),T=Object(o.useCallback)((function(){var e=O.a.timeline();C.current=e;var n=x.current,a=k.current;O.a.killTweensOf(n),O.a.killTweensOf(y.current),O.a.killTweensOf(a),S.current&&S.current.removeAttribute("style"),y.current.removeAttribute("style"),j.current.removeAttribute("style"),a.removeAttribute("style"),n.innerHTML=t.sequence[0].text,t.sequence.forEach((function(t,a){var r=function(){j.current&&(j.current.style.visibility=t.type===se.speech?"visible":"hidden"),t.type!==se.image&&(y.current&&(y.current.className="balloon ".concat(t.type)),n.innerHTML=t.text,t.balloonArrowPos&&j.current&&(j.current.style.right="".concat(t.balloonArrowPos,"%")),P()),t.scene&&E(t.scene)};switch(e.add("seq-".concat(a)),t.type){case se.caption:e.to(n,{onStart:r,duration:.025*t.text.length/1,text:{value:t.text,oldClass:"hidden",newClass:"visible"},ease:R.b.easeNone}),e.to(n,{duration:3});break;case se.speech:e.to(n,{onStart:r,duration:.045*t.text.length/1,ease:R.b.easeNone});break;case se.image:e.to(y.current,{onStart:r,duration:.25,autoAlpha:0,ease:R.b.easeNone}),e.to(j.current,{duration:.25,autoAlpha:0,ease:R.b.easeNone},"-=.25")}})),e.add("seq-".concat(t.sequence.length)),e.to(y.current,{delay:1,duration:.5,autoAlpha:0,ease:R.b.easeNone}),e.add("end"),e.to(a,{onStart:function(){S.current&&(S.current.style.display="none"),j.current&&(j.current.style.visibility="hidden")},duration:.5,left:0,ease:R.d.easeInOut},"-=1")}),[t.sequence]),P=function(){if(y.current&&j.current){var e=y.current.getBoundingClientRect();j.current.style.top="".concat(y.current.offsetTop+e.height,"px")}};Object(o.useEffect)((function(){return window.addEventListener("resize",P),function(){window.removeEventListener("resize",P)}}),[]);var A=function(){if(C.current){var e=parseInt(C.current.currentLabel().substring("seq-".length));isNaN(e)||C.current.seek("seq-".concat(e+1),!1)}};Object(o.useEffect)((function(){a?(k.current.style.left="0px",y.current.style.visibility="hidden"):T()}),[t.sequence,T,a]);var M=function(){b(!0),E(f.scene),f.correct?(ce.a.play("correct"),e.setCorrectAnswer(s)):ce.a.play("wrong")},L=function(){C.current&&(E(e.content.scene),u(null),b(!1),C.current.seek("end",!1))},I=function(e,t){if(null===s)return c.a.createElement("li",{key:e,className:"normal",onClick:function(e){return function(e,t){if(e.className="animating",N.current){var n=N.current.querySelectorAll(".options .normal");O.a.to(n,{duration:.5,opacity:0,ease:R.b.easeNone});var a=N.current.querySelector(".options").getBoundingClientRect().top,r=e.getBoundingClientRect().top,i=Math.abs(a-r);O.a.to(e,{duration:.5,top:-i,ease:R.b.easeNone,onComplete:function(){setTimeout((function(){e.className="",u(t)}),250)}})}}(e.currentTarget,t)}},c.a.createElement("div",{className:"text"},e));if(s===t){var n="selected";return p&&(n=(null===f||void 0===f?void 0:f.correct)?"correct":"wrong"),c.a.createElement("li",{key:e,className:n},c.a.createElement("div",{className:"text"},e))}};return c.a.createElement("div",{className:"scenario-screen",ref:N},c.a.createElement("div",{className:"content"},c.a.createElement("div",{className:"title"},c.a.createElement("div",{className:"close"},c.a.createElement(X,{onClick:function(){e.onClose()}})),t.title),c.a.createElement("div",{className:"situation",onClick:A},e.content.scene&&c.a.createElement(ue,{sceneConfig:w,imageBaseUrl:r}),c.a.createElement("div",{className:"inset",ref:k},c.a.createElement("p",null,t.description),c.a.createElement("ul",{className:"options"},t.options.map((function(e,t){return I(e,t)}))),f?p?c.a.createElement(c.a.Fragment,null,(null===f||void 0===f?void 0:f.correct)&&c.a.createElement("p",{className:"right-option"},"You\u2019ve chosen the right option!"),f.text.split("\n").map((function(e){return c.a.createElement("p",{key:e.substring(0,10)},e)})),!(null===f||void 0===f?void 0:f.correct)&&c.a.createElement("button",{onClick:L,className:"button-replay"},"try again")):c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,f.confirmText),c.a.createElement("p",{className:"yesno"},c.a.createElement("button",{onClick:M},"yes"),c.a.createElement("span",{className:"motivation"},f.yesText)),c.a.createElement("p",{className:"yesno"},c.a.createElement("button",{onClick:L},"no"),c.a.createElement("span",{className:"motivation"},f.noText))):null),c.a.createElement("div",{className:"balloon",ref:y},c.a.createElement("span",{ref:x})),c.a.createElement("div",{className:"balloon-arrow",ref:j,style:{visibility:"hidden"}})),!s&&c.a.createElement("div",{className:"controls-bottomright"},c.a.createElement("button",{className:"button-replay",onClick:function(){E(e.content.scene),u(null),b(!1),T()}},"replay"),c.a.createElement("button",{className:"button-next",ref:S,onClick:A},">"))))},de=(n(67),function(){return c.a.createElement("div",{className:"loading-background"},c.a.createElement("div",{className:"white-block"},c.a.createElement("div",{className:"outset"}),c.a.createElement("div",{className:"blue-block"})),c.a.createElement("div",{className:"subtext"},"Stay curious"))}),me=(n(68),function(e){return c.a.createElement("div",{className:"basedialog ".concat(e.className)},e.children)});function ve(){return(ve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function pe(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var be=c.a.createElement("defs",null,c.a.createElement("style",null,"\n            .star-empty {\n                fill: #f8f8f8;\n                stroke: #b0b0b0;\n                stroke-width: 3px;\n            }\n        ")),ge=c.a.createElement("path",{className:"star-empty",d:"M67.517,0l21.1,42.2,46.418,6.752L101.275,81.864l7.6,46.418L67.517,106.339,26.163,128.282l7.6-46.418L0,48.95,46.418,42.2Z",transform:"translate(3.223 3.354)"}),he=function(e){var t=e.svgRef,n=e.title,a=pe(e,["svgRef","title"]);return c.a.createElement("svg",ve({width:141.478,height:134.378,viewBox:"0 0 141.478 134.378",ref:t},a),n?c.a.createElement("title",null,n):null,be,ge)},we=c.a.forwardRef((function(e,t){return c.a.createElement(he,ve({svgRef:t},e))})),Ee=(n.p,n(69),function(e){return c.a.createElement(me,{className:"intro-dialog"},c.a.createElement("div",{className:"top"},c.a.createElement("h1",null,e.headerText)),c.a.createElement("div",{className:"center"},c.a.createElement("section",null,e.descriptionText)),c.a.createElement("div",{className:"bottom"},c.a.createElement(we,{className:"star"}),c.a.createElement("span",{className:"stars-to-gain"},e.starsToGainText),c.a.createElement("button",{className:"green button start",onClick:e.onStart},e.startText)))}),ye=n(29);n(32),n(41);var Oe,je=function(e,t){var n=v.Loader.shared;n.resources[e]?t(n.resources[e]):n.add(e).load((function(n,a){t(a[e])}))},xe=function(e){var t=Object(o.useState)({}),n=Object(d.a)(t,2),a=n[0],r=n[1],i=Object(o.useState)(),c=Object(d.a)(i,2),l=c[0],s=c[1],u=Object(o.useCallback)((function(e){s(e)}),[]);return Object(o.useEffect)((function(){if(l){var t=ke(l,a);if(t){var n=t.name,i=e(t);je("".concat(i),(function(e){if(e.error)throw new Error("Loading ".concat(i,"\n").concat(e.error));var t=Object(f.a)(Object(f.a)({},a),{},Object(ye.a)({},n,e));r(t)}))}}}),[l,e,a]),{loadComplete:!!l&&void 0===ke(l,a),loadTilesets:u,tilesetsTextures:a}},ke=function(e,t){return e.find((function(e){return!t[e.name]}))};n(71);V.a.registerPIXI(PIXI),O.a.registerPlugin(V.a),function(e){e[e.intro=0]="intro",e[e.normal=2]="normal",e[e.wrong=4]="wrong",e[e.correct=8]="correct",e[e.complete=16]="complete"}(Oe||(Oe={}));var Ne=function(){var e=Object(o.useState)(Oe.intro),t=Object(d.a)(e,2),n=t[0],a=t[1],r=Object(o.useState)({}),i=Object(d.a)(r,2),l=i[0],s=i[1],m=Object(o.useState)(),p=Object(d.a)(m,2),b=p[0],g=p[1],h=Object(o.useState)(),w=Object(d.a)(h,2),E=w[0],y=w[1],O=Object(o.useState)(),j=Object(d.a)(O,2),x=j[0],k=j[1],N=Object(o.useState)(),S=Object(d.a)(N,2),C=S[0],T=S[1],R=Object(o.useState)([]),P=Object(d.a)(R,2),A=P[0],L=P[1],I=Object(o.useState)(),B=Object(d.a)(I,2),D=B[0],H=B[1],G=[],W=Object(o.useCallback)((function(){H(void 0)}),[]),q=Object(o.useCallback)((function(e){window.setGameData(e)}),[]),F=Object(o.useCallback)((function(e){if(PIXI.settings.SCALE_MODE=v.SCALE_MODES.NEAREST,y(e.levelsCompleted),T(e.content),e.translations){var t=e.translations.reduce((function(e,t){return e[t.key]=t.value,e}),{});s(t)}}),[]),_=xe(Se),z=_.loadComplete,J=_.loadTilesets,U=_.tilesetsTextures;Object(o.useEffect)((function(){if(C){var e=C.mapJson;je("".concat("/vca","/").concat(e),(function(e){g(e.data)}))}}),[C]),Object(o.useEffect)((function(){b&&J(b.tilesets)}),[J,b]),Object(o.useEffect)((function(){0}),[C,F]);var X=Object(o.useMemo)((function(){var e,t=(null===E||void 0===E?void 0:E[0].score)||0,n=(null===C||void 0===C||null===(e=C.finder)||void 0===e?void 0:e.situations.length)||0;return(""+l["intro-stars-to-gain"]).replace("{0}",""+t).replace("{1}",""+n)}),[C,E,l]);return c.a.createElement(c.a.Fragment,null,!z&&c.a.createElement(de,null),c.a.createElement("div",{className:"background"},c.a.createElement(Z,{gameDataReceived:F,disableBackButton:!!D||!!x}),z&&c.a.createElement(c.a.Fragment,null,n===Oe.intro&&c.a.createElement(Ee,{onStart:function(){a(Oe.normal)},headerText:l["intro-header"],descriptionText:l["intro-description"],starsToGainText:X,startText:l["intro-start"]}),n===Oe.normal&&b&&C&&c.a.createElement(c.a.Fragment,null,c.a.createElement(M,{content:C,mapData:b,tilesetsTextures:U,onSituationClick:function(e){(null===C||void 0===C?void 0:C.finder)&&C.finder.situations.indexOf(e)>-1&&-1===A.indexOf(e)&&L([].concat(Object(u.a)(A),[e]))},foundSituations:A,solvedScenarios:G,onScenarioClick:function(e){k(null===C||void 0===C?void 0:C.scenarios[e])}}),(null===C||void 0===C?void 0:C.finder)&&c.a.createElement(Y,{content:C.finder,instruction:l["finder-instruction"],foundSituations:A,onOpenGame:function(){var e,t;if(E){var n=Object(f.a)(Object(f.a)({},null===C||void 0===C||null===(e=C.finder)||void 0===e?void 0:e.final),{},{data:Object(f.a)(Object(f.a)({},null===C||void 0===C||null===(t=C.finder)||void 0===t?void 0:t.final.data),{},{levelsCompleted:E})});H(n)}},nextText:l["button-next"]}),(null===C||void 0===C?void 0:C.scenarios)&&c.a.createElement(ie,{scenarios:C.scenarios,solvedScenarios:G})),D&&c.a.createElement($,{content:D,onBack:W,onSetGameData:q}),x&&c.a.createElement(fe,{content:x,setCorrectAnswer:function(){},onClose:function(){k(void 0)}}))))},Se=function(e){return"".concat("/vca","/maps/tilesets/").concat(e.name,".json")};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(Ne,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[44,1,2]]]);
//# sourceMappingURL=main.bfbd70a5.chunk.js.map